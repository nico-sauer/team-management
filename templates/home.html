{% extends "base.html" %}
{% load static %}
{% block title %}Home{% endblock %}
{% block content %}

<div class="container">
    {% if messages %}
        {% for message in messages %}
            {% if message.tags == 'error' %}
                
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% else %}
                <div class="alert alert-{{ message.tags }} alert-dismissible" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endif %}
       
        {% endfor %}
    {% endif %} 
</div>

<!-- Home tab -->
<div id="HomeTab" class="tabcontent" style="text-align: center;">
    <div class="hero-section">
        <div class="hero-overlay"></div>
        <div class="hero-content py-5">
            <h1 class="display-2 fw-bold mb-3">Your Team. Your System. One Platform.</h1>
            
            
            {% if request.user.is_authenticated and profile %}
                {% if profile.role == "Manager" %}
                    <div class="alert alert-info">Welcome, Manager!</div>
                    <a href="{% url 'users:register' %}" class="btn btn-success">Register Team Member</a>
                {% elif profile.role == "Trainer" %}
                    <div class="alert alert-info">Welcome, Trainer!</div>
                    <h3>Your Athletes</h3>
                    <ul>
                        {% for athlete in athletes %}
                            <li>{{ athlete.get_full_name }}</li>
                        {% empty %}
                            <li>No athletes in your team.</li>
                        {% endfor %}
                    </ul>
                    <a href="{% url 'addtrainingschedule' %}" class="btn btn-success">Create Training Plan</a>
                {% elif profile.role == "Dietician" %}
                    <div class="alert alert-info">Welcome, Dietician!</div>
                {% else %}
                    <div class="alert alert-info">Welcome to Team Management!</div>
                {% endif %}
            {% else %}
                <a href="{% url 'users:login' %}" class="btn btn-primary btn-lg">Get Started</a>
            {% endif %}
        </div>
    </div>
    {% if request.user.is_authenticated %}
        <div class="features-section">
            <h2>Features</h2>
            <div class="row justify-content-center">
                <div class="col-md-4 mb-4">
                    <div class="card shadow h-100 text-center">
                        <div class="card-body">
                            <h5 class="card-title">Workout Plans</h5>
                            <p class="card-text">Track your workouts and progress with personalized plans.</p>
                            <a href="{% url 'trainingschedule' %}" class="btn btn-outline-primary">View workout plans</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card shadow h-100 text-center">
                        <div class="card-body">
                            <h5 class="card-title">Appointments</h5>
                            <p class="card-text">Manage meetings and training sessions easily.</p>
                            <a href="{% url 'appointments:calendar' %}" class="btn btn-outline-primary">Go to Calendar</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card shadow h-100 text-center">
                        <div class="card-body">
                            <h5 class="card-title">Meal Plan</h5>
                            <p class="card-text">Check your meal.</p>
                            <a href="{% url 'mealplan' %}" class="btn btn-outline-primary">View Meal Plans</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
</div>



<!-- Other tabs -->
<div id="News" class="tabcontent">
    <h3>News</h3>
    <p>Some news this fine day!</p>
</div>
<div id="Contact" class="tabcontent">
    <h3>Contact</h3>
    <p>Get in touch, or swing by for a cup of coffee.</p>
</div>
<div id="About" class="tabcontent">
    <h3>About</h3>
    <p>Who we are and what we do.</p>
</div>

<script>
function openPage(pageName,elmnt,color) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablink");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].style.backgroundColor = "#232526";
        tablinks[i].classList.remove("active");
    }
    document.getElementById(pageName).style.display = "block";
    elmnt.style.backgroundColor = "#393e42";
    elmnt.classList.add("active");
}
document.getElementById("defaultOpen").click();
</script>
{% endblock %}